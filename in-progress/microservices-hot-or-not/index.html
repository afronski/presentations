<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Microservices :: Hot or Not?</title>

    <meta name="description" content="Talk about Microservices. Is a hot topic? Or it is not anything new?">
    <meta name="author" content="Wojciech Gawroński">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.css" />
    <link rel="stylesheet" href="css/theme/default.css" id="theme" />
    <link rel="stylesheet" href="css/theme/customizations.css" />

    <link rel="stylesheet" href="lib/css/railscasts.css" />

    <script>
      document.write("<link rel='stylesheet' href='css/print/" +
                     (window.location.search.match(/print-pdf/gi) ? "pdf" : "paper") +
                    ".css' type='text/css' media='print'>");
    </script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">

        <section id="entrance">

          <section class="introduction">
            <h1>Microservices</h1>
            <h2>Hot or Not?</h2>

            <img class="main-logo" src="img/logos/white-rook.jpg" alt="White Rook logo" />

            <span class="license">
              Wojciech Gawroński, 2014 &copy;
              License: <a href="http://creativecommons.org/licenses/by-nd/3.0/pl/">CC BY-ND 3.0 PL</a>
            </span>

            <aside class="notes">
              <ul>
                <li>Introduce Concept and Definition.</li>
                <li>Present Sample Case Studies.</li>
                <li>Bust some hype about the power of this approach.</li>
                <li>Bust some negatives about the <em>problems</em> with it.</li>
                <li>In other words: some doze of healthy and constructive critique about that topic.</li>
              </ul>
            </aside>
          </section>

          <section class="introduction">
            <h1>Agenda</h1>

            <h3 class="sketchy">Definitions</h3>
            <h3 class="sketchy">Details</h3>
            <h3 class="sketchy">Challenges</h3>
          </section>

        </section>

        <section id="definitions">

          <section data-background="img/honeycomb.jpg" class="full-background">
            <h1 class="wheat">Nature</h1>
            <h2 class="wheat">Science</h2>

            <aside class="notes">
              <ul>
                <li>Honeycomb, Wheatear ...</li>
                <li>Almost everything in nature is composed from smaller parts.</li>
                <li>Even on the physical level, not visible without very supersensitive.</li>
              </ul>
            </aside>
          </section>

          <section data-background="img/gears.jpg" class="full-background">
            <h1 class="gears">Industry</h1>

            <aside class="notes">
              <ul>
                <li>Gears inside machine.</li>
                <li>Smaller parts cooperate better, can be interchanged, replaced, repaired.</li>
                <li>'Lots of moving parts' as a disadvantage.</li>
                <li>Friction reduces the performance.</li>
              </ul>
            </aside>
          </section>

          <section data-background="img/server-room.jpg" class="full-background">
            <h1 class="it">IT</h1>

            <img src="img/server-room-with-mess.jpg" class="fragment" alt="Server Room with Mess" />

            <aside class="notes">
              <ul>
                <li>In IT we should learn from the best examples.</li>
                <li>But sometimes even if we would like to be the best, we did this.</li>
                <li><em>The road to hell is paved with good intentions.</em></li>
              </ul>
            </aside>
          </section>

          <section class="content">
            <h1>Etymology</h1>

            <ul>
              <li class="fragment">
                <strong>2011</strong> - Software Architects Workshop, Venice
              </li>

              <li class="fragment">
                <strong>2012</strong> - James Lewis, 33rd Degree, Kraków
                <small>
                  <a href="http://2012.33degree.org/pdf/JamesLewisMicroServices.pdf">
                    Micro services - Java, the Unix Way
                  </a>
                </small>
              </li>

              <li class="fragment">
                <strong>Rest of the World</strong> - Dan North, Adrian Cockroft ...
                <small>
                  <a href="http://martinfowler.com/articles/microservices.html#footnote-etymology">
                    Microservices - Etymology
                  </a>
                </small>
              </li>
            </ul>

            <aside class="notes">
              <ul>
                <li>We know how world is constructed, we are seeing the analogies.</li>
                <li>Now, lets focus exactly on the word <strong>Microservice</strong>.</li>
                <li>First usage of term "microservice" is attached to the workshops near Venice in 2011.</li>
                <li>Than James Lewis presents "The Microservices - Java, The Unix Way" at 33rd Degree in Kraków.</li>
                <li>
                  After that the most important and influential person oriented around this topic is Adrian Cockroft.
                </li>
              </ul>
            </aside>
          </section>

          <section class="important">
            <h1>Definition</h1>
            <h2>It is not that simple</h2>

            <blockquote>
              [...] an approach to developing a single application as a suite of small services, each running in its own process and communicating with lightweight mechanisms [...]
            </blockquote>

            <aside class="notes">
              <ul>
                <li>But citing exact definition is almost impossible.</li>
                <li>Gazillion of definitions.</li>
                <li>Each one uses different scale, metric, way of comparison.</li>
                <li>Almost everyone is defining it in his own unique way.</li>
                <li>Even this one is very technical and suggests actual solution.</li>
              </ul>
            </aside>
          </section>

          <section class="important">
            <h1>Definition</h1>
            <h2>Who? When? What? Where?</h2>

            <blockquote>
              Smart, isolated and self-sufficient endpoints and dumb pipes.
            </blockquote>

            <aside class="notes">
              <ul>
                <li>Different definition can be built around <em>Who? When? What? Where?</em></li>
                <li>Martin Fowler is an author of that quote.</li>
                <li>It is about the intent, responsibilities. Not about lines and size.</li>
                <li>
                  What is sometimes even more important (and we see it after a while), it is a definition in terms of amount of work.
                </li>
                <li>Who is using ESB or other <em>enterprise service bus</em>?</li>
                <li>ESB and other 'intelligent' software are an anti-pattern here.</li>
                <li>
                  I'm not saying that ESB are bad (yes they are, but it is not a topic here) but it is not that type of architecture.
                </li>
              </ul>
            </aside>
          </section>

          <section class="content">
            <h1>Evolution</h1>

            <img src="img/logos/ebay.png" class="logo" alt="eBay Logo" />
            <img src="img/logos/netflix.svg" class="logo" alt="eBay Logo" />
            <img src="img/logos/spotify.svg" class="logo" alt="eBay Logo" />

            <aside class="notes">
              <ul>
                <li>The main factor that driving change, the main theme of all changes is EVOLUTION.</li>
                <li>Have you deployed a 200 MB EAR file, which after all broken everything?</li>
                <li>Have you deal with that "one NullPointerException that destroyed the release"?</li>
                <li>Each of these companies started from the monolithic approach.</li>
                <li>A single monolithic Perl + C++ (CGI anyone?) or Java applications.</li>
                <li>BTW.: monolithic came from UNIX philosophy as a opposite technology to described one.</li>
                <li>They have evolved to the more scalable, decoupled architectures because they have to.</li>
                <li>Dropping single archive on production and hoping that everything will go okay is naive.</li>
              </ul>
            </aside>
          </section>

          <section class="content">
            <h1>Approaches</h1>

            <p>
              <blockquote>[...] is a discrete, isolated, and named piece of logic [...]</blockquote>
              <small>
                <a href="http://klangism.tumblr.com/post/80087171446/microservices">
                  <em>Actor Model, Victor Klang</em>
                </a>
              </small>
            </p>

            <p>
              <blockquote>[...] inside communicating over some number of ports with things on the outside.</blockquote>
              <small>
                <a href="http://alistair.cockburn.us/Hexagonal+architecture">
                  <em>Hexagonal Architecture, Alistair Cockburn</em>
                </a>
              </small>
            </p>

            <p>
              <blockquote>Objects communicate by sending and receiving messages.</blockquote>
              <small>
                <a href="http://c2.com/cgi/wiki?AlanKaysDefinitionOfObjectOriented">
                  <em>OOP, Dr Alan Kay</em>
                </a>
              </small>
            </p>

            <aside class="notes">
              <ul>
                <li>Actor Model, UNIX philosophy, proper DDD...</li>
                <li>Well understood and well done OOP is a <em>microservice</em>-like architecture.</li>
                <li>More samples? Erlang (25 years old language with supervision hierarchies).</li>
                <li>More samples? Smalltalk (method invocation is a message passing).</li>
                <li>More samples? Multiple hexagons (Hexagonal Architecture).</li>
                <li>More samples? Microkernel architecture.</li>
                <li>
                  Digression: I am always amazed how people remembered everything about encapsulation and inheritance and dropped out message passing.
                </li>
              </ul>
            </aside>
          </section>

        </section>

        <section id="details">

          <section class="content">
            <h1>Samples</h1>
            <h3 class="fragment sketchy">JBoss</h3>
            <h3 class="fragment sketchy">Erlang</h3>
            <h3 class="fragment sketchy">Node.js</h3>
            <h3 class="fragment sketchy">Symfony2</h3>
            <h3 class="fragment sketchy">UNIX environment</h3>

            <aside class="notes">
              <ul>
                <li>JBoss - Monolithic.</li>
                <li>Erlang - Actor Model.</li>
                <li>Node.js - Multiple Processes.</li>
                <li>Symfony2 - Decomposable Internal Architecture (nice framework).</li>
                <li>UNIX tools and environment - UNIX philosophy.</li>
              </ul>
            </aside>
          </section>

          <section class="content">
            <h2 class="sketchy">Big Ball of Mud</h2>

            <p class="fragment">
              <blockquote>
                [...] might be thought of as an anti-pattern. [...] However, its undeniable popularity leads to the inexorable conclusion that it is a pattern in its own right.
              </blockquote>

              <small>
                <a href="http://www.laputan.org/pub/foote/mud.pdf">
                  <em>Big Ball of Mud</em>
                </a>
              </small>

              <blockquote class="fragment">
                Make it work, Make it right, then make it fast.
              </blockquote>
            </p>

            <aside class="notes">
              <ul>
                <li>Question: Who read "Big Ball of Mud" paper?</li>
                <li>Who did not read it - go read it. Now. After the meeting.</li>
                <li>It is not a purely pejorative statement.</li>
                <li>We should strive the approach "make it work - make it right".</li>
                <li>First we tackle the essential complexity of the problem and iteratively improve our solution.</li>
                <li>It is a big ball of mud, collected from good, thoughtful and properly designed elements.</li>
              </ul>
            </aside>
          </section>

          <section class="content">
            <h1>Hype</h1>

            <blockquote>
              If you can't build a monolith, what makes you think microservices are the answer?
            </blockquote>

            <small>
              <a href="http://www.codingthearchitecture.com/2014/07/06/distributed_big_balls_of_mud.html">
                <em>Distributed big balls of mud</em>
              </a>
            </small>

            <blockquote>
              However, when considering microservice like architectures, it's really important to not be attracted to the hype on this one as the challenges and costs are as real as the benefits.
            </blockquote>

            <small>
              <a href="http://highscalability.com/blog/2014/4/8/microservices-not-a-free-lunch.html">
                <em>Microservices - not a free lunch!</em>
              </a>
            </small>

            <aside class="notes">
              <ul>
                <li>Like every new technology, there is a huge phase of hype on microservices.</li>
                <li>Mostly non-objective, dangerous and misunderstood approach.</li>
                <li>Also it is connected with polyglot-like movements.</li>
                <li>Polyglot persistence, polyglot programming - everything is for people.</li>
                <li>When misused, it is easy to make mess - too many technologies, too many options.</li>
                <li>More in challenges chapter.</li>
              </ul>
            </aside>
          </section>

          <section class="content">
            <h1>Deletability</h1>

            <a href="https://vimeo.com/108441214">
              <em>Greg Young - The art of destroying software</em>
            </a>

            <aside class="notes">
              <ul>
                <li>From all properties of your architecture it should be the most important one.</li>
                <li>It enables and drives the flexibility.</li>
                <li>It manages and keeps the technical debt on the sane level.</li>
                <li>How to optimize your development speed and do not spent so much time of reFUCKtoring?</li>
                <li>It is not a replacement for TDD, BDD or tests.</li>
                <li>It is a tool, a metric which helps you design and organize your code properly.</li>
                <li>
                  "If one of your parts of the system is more than a week rewrite it is a sign, that this is a dangerous side of your code and properly something went wrong here."
                </li>
              </ul>
            </aside>
          </section>

          <section class="important">
            <h1>Minimal Viable Architecture</h1>

            <aside class="notes">
              <ul>
                <li>Iteratively, step by step we are coming to the concept of minimal viable architecture.</li>
                <li>The most pragmatic approach to the software architecture, very compatible with agile.</li>
                <li>However it is also compatible with microservices architecture.</li>
                <li>We have talked about deletability, small units, single responsibilities.</li>
                <li>
                  "Perfection is Achieved Not When There Is Nothing More to Add, But When There Is Nothing Left to Take Away"
                </li>
              </ul>
            </aside>
          </section>

        </section>

        <section id="challenges">

          <section class="important">
            <h1>Caveats</h1>

            <aside class="notes"></aside>
          </section>

          <section class="important">
            <h1>Operations</h1>

            TODO: Backups - multiple storages? Migrations? Monitoring? Updates? Maintenance?
            TODO: Deployment? Blue-Green Deployment. Feature Toggles.
            TODO: Security? Support? Conflicts? Dependency Management?
            TODO: DevOps Mindset.
            TODO: Incremental approach to build an automated, reproducible infrastructure.

            <aside class="notes"></aside>
          </section>

          <section class="important">
            <h1>Service Discovery</h1>

            TODO: How to connect two unaware services together?
            TODO: How to minimize coupling?
            TODO: How to manage scarce resources (e.g. conflicting ports)?

            <aside class="notes"></aside>
          </section>

          <section class="important">
            <h1>Storage</h1>

            <aside class="notes"></aside>
          </section>

          <section class="important">
            <h1>Contracts</h1>
            <h2>Transport</h2>

            TODO: Deliberately 'Contracts' not an API.
            TODO: API is a most misunderstood thing in IT.
            TODO: Transport is a huge choice in this type of architecture.
            TODO: Difficult choice: Schema-less vs. Strict? Schema On or Off the wire?
            TODO: Difficult choice: Binary vs. Text? TCP oriented or not?
            TODO: Difficult choice: Versions? Compression? ...
            TODO: Rich Hickey talk about 'Language of the System'.

            <aside class="notes"></aside>
          </section>

          <section class="important">
            <h1>Fuzzy Boundaries</h1>
            <aside class="notes"></aside>
          </section>

          <section class="important">
            <h1>Integration through Storage</h1>
            <aside class="notes"></aside>
          </section>

          <section class="important">
            <h1>Tests</h1>

            <img src="img/challenges/testing.png" alt="Testing Challenges" />

            <aside class="notes"></aside>
          </section>

          <section class="important">
            <h1>Tests</h1>
            <h2>Operations</h2>

            TODO: Flow control (20% of traffic through new solution).
            TODO: Test Users on production (at least some of data will go through him).
            TODO: Enabling feature toggles per user (easily testable new features in isolated group).

            <aside class="notes"></aside>
          </section>

          <section class="important">
            <h1>Robustness</h1>

            TODO: Failure propagation? Circuit Breaker etc.
            TODO: Building Distributed Systems in Presence of Software Errors (paper).
            <aside class="notes"></aside>
          </section>

          <section class="important">
            <h1>Scale</h1>

            TODO: 'One on a million' happens every minute or so.
            TODO: Scaling multiple things is flexible than scaling one.
            TODO: But sometimes it is easier to introduce edge cases.
            TODO: e.g. scaling multiple services can introduce increased.
            TODO: traffic and problems with TCP stack settings.
            TODO: Cloud should help you, not be a constraint or a problem.
            <aside class="notes"></aside>
          </section>

        </section>

        <section id="closing">

          <section class="content">
            <h1>Time for Questions</h1>
          </section>

          <section class="introduction">
            <h1>Thanks</h1>
            <h2>References:</h2>
            <ul class="links">
              <li>
                <a href="http://martinfowler.com/articles/microservices.html#footnote-etymology">
                  <em>Microservice</em> etymology
                </a>
              </li>
              <li>
                <a href="http://klangism.tumblr.com/post/80087171446/microservices">
                  <em>Microservice</em> definition (<em>Victor Klang</em>)
                </a>
              </li>
              <li>
                <a href="http://www.erlang.org/download/armstrong_thesis_2003.pdf">
                  <em>Making reliable distributed systems in the presence of software errors</em>
                </a>
              </li>
              <li>
                <a href="http://alistair.cockburn.us/Hexagonal+architecture">
                  <em>Hexagonal Architecture</em>
                </a>
              </li>
              <li>
                <a href="http://highscalability.com/blog/2014/4/8/microservices-not-a-free-lunch.html">
                  <em>Microservices - Not a Free Lunch!</em>
                </a>
              </li>
              <li>
                <a href="http://www.codingthearchitecture.com/2014/07/06/distributed_big_balls_of_mud.html">
                  <em>Distributed big balls of mud</em>
                </a>
              </li>
              <li>
                <a href="https://vimeo.com/108441214">
                  <em>Greg Young - The art of destroying software</em>
                </a>
              </li>
              <li>
                <a href="http://dspace.mit.edu/handle/1721.1/41962">
                  <em>Laws for Communicating Parallel Processes</em>, Actor Model
                </a>
              </li>
              <li>
                <a href="http://c2.com/cgi/wiki?AlanKaysDefinitionOfObjectOriented">
                  <em>Alan Kay's Definition of Object Oriented</em>
                </a>
              </li>
            </ul>
          </section>

          <section class="introduction">
            <h1>Images</h1>
            <h2>Credits:</h2>
            <ul class="links">
              <li>
                <a href="https://www.flickr.com/photos/if-by-whiskey/3349918096">Honeycomb</a>, <a href="https://www.flickr.com/photos/e_tavares/3499009813">Gears</a>
              </li>
              <li>
                <a href="http://upload.wikimedia.org/wikipedia/commons/1/11/PDC_server_room.jpg">Server Room</a>, <a href="https://www.flickr.com/photos/caseorganic/4476353959/">Messy Cables</a>
              </li>
              <li>
                <a href="http://upload.wikimedia.org/wikipedia/commons/a/a0/Spotify.svg">Spotify</a>, <a href="http://upload.wikimedia.org/wikipedia/commons/0/0c/Netflix_2014_logo.svg">Netflix</a>, <a href="http://upload.wikimedia.org/wikipedia/commons/4/48/EBay_logo.png">eBay</a>
              </li>
            </ul>
          </section>

        </section>

      </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.min.js"></script>

    <script>
      var LIGHT = "#E8DDCB",
          MEDIUM = "#036564",
          DARK = "#033649";

      Function.prototype.curry = function() {
        var fn = this,
            args = [].slice.call(arguments);

        return function() {
          return fn.apply(this, args.concat([].slice.call(arguments)));
        };
      };

      function getArrayOfDomElements(selector) {
        return [].slice.call(document.querySelectorAll(selector));
      }

      function applyColor(color, element) {
        element.setAttribute("data-background", color);
      }

      getArrayOfDomElements(".introduction").forEach(applyColor.curry(LIGHT));
      getArrayOfDomElements(".content").forEach(applyColor.curry(MEDIUM));
      getArrayOfDomElements(".important").forEach(applyColor.curry(DARK));

      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        theme: "default",
        transition: "slide",
        transitionSpeed: "fast",
        backgroundTransition: "linear",

        dependencies: [
          {
            src: "lib/js/classList.js", condition: function() { return !document.body.classList; }
          },
          {
            src: "plugin/highlight/highlight.js", async: true, callback: function() { hljs.initHighlightingOnLoad(); }
          },
          {
            src: "plugin/zoom-js/zoom.js", async: true, condition: function() { return !!document.body.classList; }
          },
          {
            src: "plugin/notes/notes.js", async: true, condition: function() { return !!document.body.classList; }
          },
          {
            src: "socket.io/socket.io.js", async: true
          },
          {
            src: "plugin/notes-server/client.js", async: true
          }
        ]
      });
    </script>
  </body>
</html>